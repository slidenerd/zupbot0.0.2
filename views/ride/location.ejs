<html>
<head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta http-equiv="x-ua-compatible" content="ie=edge">

        <meta property="og:url"           content="https://zup.chat/" />
        <meta property="og:type"          content="website" />
        <meta property="og:title"         content="Zup" />
        <meta property="og:description"   content="Zup using booking Ola / Uber." />
        <meta property="og:image"         content="" />
        
        <!--  Zup Logo  -->
        <link rel="icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpEMEJDMzcxODg5M0YxMUU2QTM3NDlDQjU4MjcxM0I1NiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpEMEJDMzcxOTg5M0YxMUU2QTM3NDlDQjU4MjcxM0I1NiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkQwQkMzNzE2ODkzRjExRTZBMzc0OUNCNTgyNzEzQjU2IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkQwQkMzNzE3ODkzRjExRTZBMzc0OUNCNTgyNzEzQjU2Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+LIrr2AAABOtJREFUeNrsmWtsFFUUx89MZ1+0W7utu4uibUkLDVVIfEYNYgDRiEYUkBQLRg0vNSVg4iPig+g3Er80aRUwRhIwSoymvqNWE/WDYtRoaExEErI8VGikbN3S3e3M9X+6Z3Ey3G26mBob5yS/7M6dOzP3f++555zZNZRSNJnNpEluvgBfgC/AF+AL8AX4AnwB/2cBVnPj9Cp8bgFXgp/BM0OO0z+/Okp7mprIcRxCvdqO9g1gBIqfyyn16ZIDv1Df8HAiZBgb0d4I3gWvlXhOA3hSPnuzSnVeEg6f7pnRTEHDaHCItqL9QvAZ2A5mg2vBxYDL5RT4Cnwpx38LAM+CzXJ8I4ijx0qLDFvaloDdrmtY6BUi9gWwVNpZJMZCez2DD8j1c+V4EagDj4IQ2AVukHM3gQdAfYmJYIFPiJgzLrTa02mZo6j+6spK/t4MMS96zleJUL52gefcXZqH8mCu8bQtlM8W1+Dd/UvZfBFxj1vA7+4eeaVOJgPW4PLaGBZL8eCnajbOCXxUeJdTVtRrYWB42oqrGz0Ht+f7vQIWFwU8DbJUGI0aVmrL+kS8PxkMPmwrtdB7tWEYHx7L53uO5POVlmF4Behe75SmXY3R321DYEDTzhOyE8R4xt5kn8adWk/Z9qEHE/FvHkom52LzbtNc2E+muaY3PZg7kc9XRSsqJiq49IPHwPdgluyj52XvFI03/UprBO/EoC+nqK+ttpaemjYtCtfpVgUX8crejHNHewfTVGEYEzX4IQkMX4BKiX6/gRXgfdn4RbvdjFkWzYpEqKuxnjob6llqF1xntubG203T3L0/M0Rf/5mhsDlhKeQlGTxbBqyX2b5AQqzbWqxPWmZSFIMJwh2U4yy3z45KbPvB4/zl7YEBSts2VY/ffZwyBezTtD0CtolLua3arMMKBOAOtuPMxJO6NRcPg1VwmAEH7rYvkxntX8Zgg2VmfFvTxhu5FyS9fU24Cz/VlKQU93TIg03gBw4XcCG6PlpFucJvSbrooguLa8oUUGp2Xpck6LbjxRtv1SQlkhzhiB/Og4vR/fE4tUbChHKAN9tJT//LxF+Lxtm2o0wXUiVqNo5C13ndjcPoPKmFdHYR2HHGP5R6KxYI3NuRSKY7Uqks6iDeG82u/ryCH8hyt4KbSxWRYySAU6ANrAUfyeAXu0oRt+0p1kLjXeI7lW2nbq05b1P38TAdyGb3QsQdnj5zhLGmOIMkSKZx1mZiXXdL/RUt4RVFe48nigceK2d94U/rIpbVuDGZ4PzxhsTmsgzXfTw1GKCAaXpTOQtaNY4S4ydwX9G3dpT5/AhWYc4tNTV0+ZQpeZQeq8VlSlnKc8wxvntBNMp1CZ3DT8t8/W1UqMdGiy8OnTmp8ELjqE8MrEI2hDzQXldL3x0+8gcGskhu2i7uw/c9LJHtIOiRB76Kzd/dineBpbEY5x3d/Y+CX8GlUrixnQZ9oEtK8xF39aikMNpZXqxQ1BQKF0tShbV/hwoEZGWzrt48mPRoUsGg2yAcbki2rQv59C3vNTAdJFzR8JAuz1j/JOeP6P9byGvaRgfP+WNGOETLSs8+2+cy0IPCf+edmGd/7flxqgsGOSTrktaP4OWy3on/rcHD9+kqvOWtgPu4Zp/33jGpNjnmd2qS49gb0v+LyRfgC/AF+AJ8Ab4AX4AvYPLaXwIMAEtpgaduUkn/AAAAAElFTkSuQmCC">
        <title>Zup Booking</title>

        <!-- Font -->
        <link rel='stylesheet prefetch' href='https://fonts.googleapis.com/css?family=Open+Sans'>
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.11.2.min.js"></script>

        <!-- Font Awesome -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.0/css/font-awesome.min.css">

        <!-- Bootstrap core CSS -->
        <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.4/css/bootstrap.min.css" integrity="sha384-2hfp1SzUoho7/TsGGGDaFdsuuDL0LX2hnUp6VkX3CUQ2K4K+xjboZdsXyp4oUHZj" crossorigin="anonymous">-->
         <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

        <!-- Material Design Bootstrap -->
        <link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.1.1/css/mdb.min.css" rel="stylesheet">

        
<style>
    .title {
        color: #f9a825;
        font-family: 'Arial', 'Sans-serif';
        width: 100%; 
        margin: 0 auto;
        margin-top: 20px;
        text-align: center;
        font-weight: 900;
    }
    .fWidth {
        width: 150px;
    }
    .top-buffer { margin-top:40px; }
    .spacing {
        padding-left: 20px;
        padding-right: 20px;
    }
    .btn-white {
        background-color: #FFF;
        color: #2B7FD2 !important;
    }
    .btn-blue {
        background-color: #2B7FD2;
        color: #FFF !important;
    }
</style>
<script>
    function checkPrice(orgValue, provider) {
        var pickupVal = document.getElementById('pickupLocation').value;
        var dropVal = document.getElementById('dropLocation').value;
        if(pickupVal == orgLocation) {
            pickupVal = orgValue;
        }
        window.location = '/api/ride/price?pickup=' + pickupVal + "&drop=" + dropVal + '&provider=' + provider;
    }
    function clearForm() {
        var pickup = document.getElementById('pickupLocation');
        var drop = document.getElementById('dropLocation');
        pickup.value = "";
        drop.value = "";
    }
</script>
</head>
<body>
        <main>
            <div class="container main-content">
                <div class="row">
                    <div class="title h3">Book your ride</div>
                </div>
                <div class="row top-buffer spacing">
                    <label for="pickupLocation">Pickup Location:</label>
                    <%if(typeof pickup != 'undefined') {%>
                        <input type="text" id="pickupLocation" value="<%=pickup%>"/>
                    <%} else {%>
                        <input type="text" id="pickupLocation"/>
                    <%}%>
                </div>
                <div class="row top-buffer spacing">
                    <label for="dropLocation">Drop Location:</label>
                    <%if(typeof drop != 'undefined') {%>
                        <input type="text" id="dropLocation" value="<%=drop%>"/>
                    <%} else {%>
                        <input type="text" id="dropLocation"/>
                    <%}%>    
                </div>
                <div class="row top-buffer text-center">
                    <div class="col-xs-6 text-center">
                        <button type="button" class="btn btn-blue fWidth" onclick="checkPrice('<%=pickup%>', '<%=provider%>');">Check Price</button>
                    </div>
                    <div class="col-xs-6 text-center">
                        <button type="button" class="btn btn-white fWidth" onclick="clearForm();">Clear</button>
                    </div>
                </div>
            </div>
        </main>                   
</body>
    <script>
        var orgLocation;
        function initMap() {
            var input = /** @type {!HTMLInputElement} */(
                document.getElementById('pickupLocation'));
            var autocomplete = new google.maps.places.Autocomplete(input);
            input = /** @type {!HTMLInputElement} */(
                document.getElementById('dropLocation'));
            autocomplete = new google.maps.places.Autocomplete(input);
            geocodeLatLng(document.getElementById('pickupLocation').value);
        }
    function geocodeLatLng(input) {
        var latlngStr = input.split(',');
        if(latlngStr.length != 2) {
            console.log("pickup seems to be address, not doing reverse geocode");
            return;
        }
        
        var lat, lng;
        if(latlngStr[0]) {
            lat = parseFloat(latlngStr[0].trim());
        }
        if(latlngStr[1]) {
            lng = parseFloat(latlngStr[1].trim());
        }
        if(isNaN(lat) || isNaN(lng)) {
            console.log("pickup seems to be address, not doing reverse geocode");
            return;
        }
        var latlng = {lat: lat, lng: lng};
        var geocoder = new google.maps.Geocoder;
        var output = document.getElementById('output'); 
        geocoder.geocode({'location': latlng}, function(results, status) {
          if (status === 'OK') {
            if (results[1]) {
              orgLocation = results[1].formatted_address;
              document.getElementById('pickupLocation').value = orgLocation;
              results[1].address_components.forEach(item => {
                    var types = JSON.stringify(item.types)
                    if(types.indexOf('"locality"') != -1) {
                        document.getElementById('dropLocation').value = document.getElementById('dropLocation').value + ', ' + item.long_name;
                        return false;
                    } 
              })  
              return;
            }
        }
            orgLocation = input;
        });
      }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAdpqTe4-aUVsa8AcxD4WbHDD7lqyrAqzM&libraries=places&callback=initMap"
        async defer></script>
</html>